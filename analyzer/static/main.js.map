{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/route.service.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,4CAA4C,WAAW;AACvD;AACA;AACA,4E;;;;;;;;;;;ACZA,+CAA+C,mBAAmB,KAAK,kCAAkC,oBAAoB,KAAK,YAAY,mBAAmB,KAAK,aAAa,oBAAoB,qBAAqB,sBAAsB,sCAAsC,wBAAwB,eAAe,gBAAgB,uBAAuB,oCAAoC,qBAAqB,KAAK,UAAU,kBAAkB,KAAK,cAAc,mBAAmB,wBAAwB,KAAK,YAAY,oBAAoB,sBAAsB,wBAAwB,yBAAyB,4BAA4B,KAAK,iBAAiB,2BAA2B,8BAA8B,qBAAqB,wBAAwB,uBAAuB,KAAK,aAAa,2BAA2B,8BAA8B,oBAAoB,qBAAqB,KAAK,mBAAmB,sBAAsB,KAAK,aAAa,2BAA2B,wBAAwB,eAAe,gBAAgB,iBAAiB,kBAAkB,+BAA+B,wBAAwB,KAAK,oBAAoB,2BAA2B,sBAAsB,qBAAqB,oBAAoB,kBAAkB,oBAAoB,gCAAgC,wBAAwB,KAAK,2BAA2B,kCAAkC,KAAK,yBAAyB,oCAAoC,KAAK,kCAAkC,4CAA4C,oCAAoC,KAAK,4CAA4C,4BAA4B,KAAK,0BAA0B,2BAA2B,KAAK,C;;;;;;;;;;;ACAjtD,4SAA4S,MAAM,4VAA4V,QAAQ,yLAAyL,yKAAyK,qMAAqM,2EAA2E,oJ;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAxsC;AAEjB;AACV;AACmD;AAOxF;IAsBE,sBAAoB,YAA0B;QAA1B,iBAAY,GAAZ,YAAY,CAAc;QArB9C,UAAK,GAAG,WAAW,CAAC;QAEpB,eAAU,GAAG,8BAA8B;QAE3C,oCAAoC;QACpC,gBAAW,GAAG,KAAK,CAAC;QAEpB,+BAA+B;QAC/B,YAAO,GAAG,EAAE,CAAC;QAEb,gBAAW,GAAO,EAAE,CAAC;QACrB,WAAM,GAAO,EAAE,CAAC;QAIhB,QAAG,GAAW,gBAAgB,CAAC;QAC/B,QAAG,GAAW,gBAAgB,CAAC;QAC/B,SAAI,GAAU,EAAE,CAAC;QAEjB,QAAG,GAAO,IAAI,CAAC,CAAC,+EAA+E;IAG/F,CAAC;IAED,+BAAQ,GAAR;QAAA,iBAKC;QAJC,sBAAsB;QACtB,IAAI,CAAC,YAAY,CAAC,UAAU,EAAE,CAAC,SAAS,CAAC,UAAC,IAAI;YAC5C,KAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QAC1B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,iCAAU,GAAV,UAAW,KAAU;QAArB,iBA0BC;QAzBC,IAAI,IAAI,CAAC,WAAW,EAAE;YAEpB,mCAAmC;YACnC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC,CAAC,qBAAqB;gBACxC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;aAClB;YAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YAEhC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3B,6CAA6C;gBAC7C,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,SAAS,CAAC,kBAAQ;oBAC9D,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAChD,IAAG,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;wBACtB,KAAI,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;4BACvC,sCAAsC;4BACtC,KAAI,CAAC,YAAY,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,qBAAW;gCAC5D,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;4BAChC,CAAC,CAAC,CAAC;yBACJ;qBACF;gBACH,CAAC,CAAC,CAAC;aACJ;SACF;IACH,CAAC;IAED,+BAAQ,GAAR,UAAS,KAAK;QACZ,IAAI,MAAM,GAAG,CAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CAAE,CAAC;QACjD,OAAO,MAAM,CAAC,KAAK,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;IACvC,CAAC;IAED,uCAAgB,GAAhB;QACE,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,8BAA8B;YAC9B,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;SACnB;QAED,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC;IACvC,CAAC;IAED,sCAAe,GAAf,UAAgB,QAAQ;QAAxB,iBAmBC;QAlBC,IAAI,IAAI,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;SACxB;QAED,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC;QACnB,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,qBAAW;YACnE,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;YAEnC,KAAI,CAAC,GAAG,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;YACnC,KAAI,CAAC,GAAG,GAAG,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YACpC,KAAI,CAAC,IAAI,GAAG,EAAE,CAAC;YAEf,KAAI,CAAC,GAAG,GAAG,+CAAE,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,gEAAS,EAAE,CAAC,CAAC,yCAAyC;iBACnF,IAAI,CAAC,gEAAS,CAAC,aAAG,IAAI,sDAAE,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,4DAAK,CAAC,EAAE,CAAC,CAAC,EAAvB,CAAuB,CAAC,CAAC,CAAC,sBAAsB;iBACtE,SAAS,CAAC,eAAK;gBACd,KAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC/B,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACL,CAAC;IA9FU,YAAY;QALxB,+DAAS,CAAC;YACT,QAAQ,EAAE,UAAU;;;SAGrB,CAAC;yCAuBkC,2DAAY;OAtBnC,YAAY,CAgGxB;IAAD,mBAAC;CAAA;AAhGwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXiC;AACjB;AACM;AACF;AACW;AACT;AACL;AAkB1C;IAAA;IAAyB,CAAC;IAAb,SAAS;QAhBrB,8DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,2DAAY;aACb;YACD,OAAO,EAAE;gBACP,uEAAa;gBACb,4DAAY;gBACZ,0DAAW;gBACX,qEAAgB;gBAChB,uDAAa,CAAC,OAAO,CAAC;oBACpB,MAAM,EAAE,yCAAyC;iBAClD,CAAC;aACH;YACD,SAAS,EAAE,EAAE;YACb,SAAS,EAAE,CAAC,2DAAY,CAAC;SAC1B,CAAC;OACW,SAAS,CAAI;IAAD,gBAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBqB;AACO;AAEyB;AAO3E;IAIE,sBAAoB,IAAgB;QAAhB,SAAI,GAAJ,IAAI,CAAY;QAFpC,aAAQ,GAAG,8BAA8B,CAAC;IAG1C,CAAC;IAED,iCAAU,GAAV;QACE,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC;IACjD,CAAC;IAED,gCAAS,GAAT,UAAU,QAAQ;QAChB,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,sBAAsB,GAAG,QAAQ,CAAC,CAAC;IAC1E,CAAC;IAED,oCAAa,GAAb,UAAc,WAAW;QACvB,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,iBAAiB,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,0DAAG,CAAC,cAAI,IAAI,WAAI,CAAC,QAAQ,CAAC,EAAd,CAAc,CAAC,CAAC,CAAC;IAC1G,CAAC;IAjBU,YAAY;QAHxB,gEAAU,CAAC;YACV,UAAU,EAAE,MAAM;SACnB,CAAC;yCAK0B,+DAAU;OAJzB,YAAY,CAoBxB;IAAD,mBAAC;CAAA;AApBwB;;;;;;;;;;;;;ACVzB;AAAA;AAAA,gFAAgF;AAChF,0EAA0E;AAC1E,gEAAgE;AAEzD,IAAM,WAAW,GAAG;IACzB,UAAU,EAAE,KAAK;CAClB,CAAC;AAEF;;;;;;GAMG;AACH,mEAAmE;;;;;;;;;;;;;ACfnE;AAAA;AAAA;AAAA;AAAA;AAA+C;AAC4B;AAE9B;AACY;AAEzD,IAAI,qEAAW,CAAC,UAAU,EAAE;IAC1B,oEAAc,EAAE,CAAC;CAClB;AAED,gGAAsB,EAAE,CAAC,eAAe,CAAC,yDAAS,CAAC;KAChD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,KAAK,CAAC,GAAG,CAAC,EAAlB,CAAkB,CAAC,CAAC","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","module.exports = \"\\r\\nselect:required:invalid {\\r\\n  color: black;\\r\\n}\\r\\noption[value=\\\"\\\"][disabled] {\\r\\n  display: none;\\r\\n}\\r\\noption {\\r\\n  color: black;\\r\\n}\\r\\n#header {\\r\\n    width: 100%;\\r\\n    height: 40px;\\r\\n    padding: 10px;\\r\\n    border-bottom: 1px solid #666;\\r\\n    position: fixed;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    z-index: 10000;\\r\\n    background-color: #17131587;\\r\\n    color: white;\\r\\n}\\r\\n#map {\\r\\n    top: 60px;\\r\\n}\\r\\n.actions {\\r\\n    float:left;\\r\\n    margin-top: 5px;\\r\\n}\\r\\n.title {\\r\\n    float: left;\\r\\n    padding: 10px;\\r\\n    font-size: 20px;\\r\\n    font-weight: 800;\\r\\n    margin-right: 100px;\\r\\n}\\r\\n.mode_label {\\r\\n    position: relative;\\r\\n    display: inline-block;\\r\\n    width: 180px;\\r\\n    font-size: 16px;\\r\\n\\r\\n    top: -10px;\\r\\n}\\r\\n.switch {\\r\\n    position: relative;\\r\\n    display: inline-block;\\r\\n    width: 60px;\\r\\n    height: 34px;\\r\\n}\\r\\n.switch input {\\r\\n    display: none;\\r\\n}\\r\\n.slider {\\r\\n    position: absolute;\\r\\n    cursor: pointer;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    right: 0;\\r\\n    bottom: 0;\\r\\n    background-color: #ccc;\\r\\n    transition: .4s;\\r\\n}\\r\\n.slider:before {\\r\\n    position: absolute;\\r\\n    content: \\\"\\\";\\r\\n    height: 26px;\\r\\n    width: 26px;\\r\\n    left: 4px;\\r\\n    bottom: 4px;\\r\\n    background-color: white;\\r\\n    transition: .4s;\\r\\n}\\r\\ninput:checked+.slider {\\r\\n    background-color: #2196F3;\\r\\n}\\r\\ninput:focus+.slider {\\r\\n    box-shadow: 0 0 1px #2196F3;\\r\\n}\\r\\ninput:checked+.slider:before {\\r\\n    -webkit-transform: translateX(26px);\\r\\n    transform: translateX(26px);\\r\\n}\\r\\n/* Rounded sliders */\\r\\n.slider.round {\\r\\n    border-radius: 34px;\\r\\n}\\r\\n.slider.round:before {\\r\\n    border-radius: 50%;\\r\\n}\"","module.exports = \"<div id=\\\"header\\\">\\n  <div class=\\\"title\\\">Route Analyzer</div>\\n  <div class=\\\"actions\\\">\\n    <label class=\\\"switch\\\">\\n      <input type=\\\"checkbox\\\" (click)=\\\"onSwitchDrawMode()\\\">\\n      <span class=\\\"slider round\\\"></span>\\n    </label>\\n    <span class=\\\"mode_label\\\">&nbsp;&nbsp;Draw Mode</span>\\n  </div>\\n  <div class=\\\"actions\\\" id=\\\"routes_checkbox\\\" *ngIf=\\\"!drawingMode\\\">\\n    <select [(ngModel)]=\\\"selectedRouteId\\\" required (change)=\\\"onRouteSelected($event.target.value)\\\">\\n      <option hidden [value]=\\\"undefined\\\" disabled selected>Select route\\n      <option *ngFor=\\\"let r of route_names\\\" [ngValue]=\\\"r.id\\\">{{r.name}}\\n    </select>\\n  </div>\\n</div>\\n\\n<agm-map [latitude]=\\\"lat\\\" [longitude]=\\\"lng\\\" [zoom]=\\\"zoom\\\" (mapClick)=\\\"onMapClick($event)\\\">\\n  <agm-marker \\n      *ngFor=\\\"let m of markers; let i = index\\\"\\n      [latitude]=\\\"m.lat\\\"\\n      [longitude]=\\\"m.lng\\\">\\n  </agm-marker>\\n  <agm-polyline>\\n    <agm-polyline-point \\n      *ngFor=\\\"let m of markers; let i = index\\\"\\n      [latitude]=\\\"m.lat\\\"\\n      [longitude]=\\\"m.lng\\\">\\n    </agm-polyline-point>\\n  </agm-polyline>\\n  <agm-polyline [strokeColor]=\\\"getColor(c)\\\" *ngFor=\\\"let route of routes; let c = index\\\">\\n    <agm-polyline-point \\n      *ngFor=\\\"let p of route; let i = index\\\"\\n      [latitude]=\\\"p.latitude\\\"\\n      [longitude]=\\\"p.longitude\\\">\\n    </agm-polyline-point>\\n  </agm-polyline>\\n</agm-map>\\n\\n\"","import { Component, OnInit, EventEmitter } from '@angular/core';\nimport {Route, Location } from './models';\nimport { RouteService } from './route.service';\nimport { Observable, of} from 'rxjs';\nimport { mapTo, delay, flatMap, concatAll, concatMap, takeUntil } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  title = 'route-app';\n\n  ROUTES_URL = \"http://127.0.0.1:8000/routes\"\n\n  // Flag indicating drawing line mode\n  drawingMode = false;\n     \n  // Markers for drawing the line\n  markers = [];\n  \n  route_names:any = [];\n  routes:any = [];\n\n  selectedRouteId:any;\n\n  lng: number = 34.7730261824675;\n  lat: number = 32.0759398737466;\n  zoom:number = 15;\n\n  sub:any = null; // holds subscription to stop drawing individual route when new one is selected\n\n  constructor(private routeService: RouteService) {\n  }\n\n  ngOnInit() {\n    // Load list of routes\n    this.routeService.loadRoutes().subscribe((data) => {\n      this.route_names = data;\n    });\n  }\n\n  onMapClick(event: any) {\n    if (this.drawingMode) {\n\n      // If more than two markers, reset \n      if (this.markers.length > 1) {\n        this.markers = []; // clear line markers\n        this.routes = [];\n      }\n\n      this.markers.push(event.coords);  \n\n      if (this.markers.length > 1) {\n        // Find all routes intersecting with the line\n        this.routeService.intersections(this.markers).subscribe(routeIds => {\n          routeIds = Array.prototype.slice.call(routeIds);\n          if(routeIds.length > 0) {\n            for(var i = 0; i < routeIds.length; i++) {\n              // Load each route and draw its points\n              this.routeService.loadRoute(routeIds[i]).subscribe(routePoints => {\n                this.routes.push(routePoints);\n              });\n            }\n          }\n        });\n      }\n    }\n  }\n\n  getColor(index) {\n    var colors = [ \"#ff0000\", \"#00ff00\", \"#0000ff\" ];\n    return colors[index % colors.length];\n  }\n\n  onSwitchDrawMode() {\n    if (this.drawingMode) {\n      // Clear user markers and line\n      this.markers = [];\n    }\n\n    this.routes = [];\n    this.drawingMode = !this.drawingMode;\n  }\n\n  onRouteSelected(route_id) {\n    if (this.sub) {\n      this.sub.unsubscribe();\n    }\n\n    this.routes = [[]];\n    this.routeService.loadRoute(this.selectedRouteId).subscribe(routePoints => {\n        console.log(\"Points\", routePoints);\n\n        this.lat = routePoints[0].latitude;\n        this.lng = routePoints[0].longitude;\n        this.zoom = 15;\n\n        this.sub = of(routePoints).pipe(concatAll()) // unpack the array into single emissions\n          .pipe(concatMap(val => of(val).pipe(delay(10)))) // delay each emission\n          .subscribe(point => {\n            this.routes[0].push(point);\n        });\n    });\n  }\n\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { AppComponent } from './app.component';\nimport { AgmCoreModule } from '@agm/core';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    AgmCoreModule.forRoot({\n      apiKey: 'AIzaSyDjZJorWDLqP3PFA7RzqAp1jQJlbRv4QU0'\n    })\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, of} from 'rxjs';\nimport { map, delay, flatMap, concatAll, concatMap } from 'rxjs/operators';\n\nimport {Route, Location } from './models';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RouteService {\n\n  API_BASE = \"http://127.0.0.1:8000/routes\";\n\n  constructor(private http: HttpClient) { \n  }\n\n  loadRoutes() {\n    return this.http.get(this.API_BASE + '/routes')\n  }\n  \n  loadRoute(route_id) {\n    return this.http.get(this.API_BASE + \"/locations?route_id=\" + route_id);\n  }\n\n  intersections(coordinates) {\n    return this.http.post(this.API_BASE + '/intersections/', coordinates).pipe(map(data => data['routes']));\n  }\n\n\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n\n"],"sourceRoot":""}